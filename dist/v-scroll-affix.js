!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).VScrollAffix=t()}(this,function(){"use strict";var e,o,t=(function(e){e.exports=function(){function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function e(){n(this,e),this.offsetTop=0};function c(e){for(var t=e.offsetLeft,o=e.offsetTop;e=e.offsetParent;){t+=e.offsetLeft,o+=e.offsetTop}return{x:t,y:o}}!function(e,t){void 0===t&&(t={});var o,n,i=t.insertAt;e&&"undefined"!=typeof document&&(o=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("style")).type="text/css","top"===i&&o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)))}(".scroll-affix{position:fixed}.scroll-affix-max{position:relative}");var r="scroll-affix",a="scroll-affix-max";return function(){function t(e){var l=this;n(this,t),this.status=0,this.handleScroll=function(){var e,t=l.options,o=t.el,n=t.offsetTop,i=t.maxScrollHeight,s=t.sectionSelector,r="function"==typeof i?i():i;s&&(r=c(e=document.querySelector(s)).y+e.offsetHeight);var a=document.body.scrollTop||document.documentElement.scrollTop,f=0;r&&a+n+o.offsetHeight>r?f=2:a+n>l.baseTop&&(f=1),f!==l.status&&l.updateStatus(f,r)},this.options=Object.assign({},new s,e),this.initialize()}var e,o;return e=t,(o=[{key:"initialize",value:function(){this.baseTop=c(this.options.el).y,window.addEventListener("scroll",this.handleScroll)}},{key:"updateStatus",value:function(e,t){this.status=e;var o=this.options,n=o.el,i=o.offsetTop;switch(e){case 0:n.classList.remove(r,a),n.style.top="auto";break;case 1:n.classList.add(r),n.classList.remove(a),n.style.top=i+"px";break;default:n.classList.remove(r),n.classList.add(a),n.style.top=t-n.offsetHeight-this.baseTop+"px"}}},{key:"dispose",value:function(){window.removeEventListener("scroll",this.handleScroll)}}])&&i(e.prototype,o),t}()}()}(o={path:e,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&o.path)}},o.exports),o.exports),n="__scroll_affix__";function i(e,t,o,n,i,s,r,a,f,l){"boolean"!=typeof r&&(f=a,a=r,r=!1);var c,u,d,p="function"==typeof o?o.options:o;return e&&e.render&&(p.render=e.render,p.staticRenderFns=e.staticRenderFns,p._compiled=!0,i&&(p.functional=!0)),n&&(p._scopeId=n),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,f(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},p._ssrRegister=c):t&&(c=r?function(e){t.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),c&&(p.functional?(u=p.render,p.render=function(e,t){return c.call(t),u(e,t)}):(d=p.beforeCreate,p.beforeCreate=d?[].concat(d,c):[c])),o}var s=i({render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)},staticRenderFns:[]},void 0,{name:"v-scroll-affix",props:{offsetTop:{default:0},maxScrollHeight:{default:0},sectionSelector:{default:""}},methods:{initScrollAffix:function(){this[n]=new t({el:this.$el,offsetTop:this.offsetTop,maxScrollHeight:this.maxScrollHeight,sectionSelector:this.sectionSelector})},updateOptions:function(){Object.assign(this[n].options,this.$props)}},mounted:function(){var e=this;this.$nextTick(function(){e.initScrollAffix()})},beforeDestroy:function(){this[n]&&(this[n].dispose(),this[n]=void 0)},watch:{$props:{deep:!0,handler:function(){this.updateOptions()}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);return s.install=function(e){e.component(s.name,s)},s});
