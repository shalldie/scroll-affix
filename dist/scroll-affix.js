!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ScrollAffix=t()}(this,function(){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var a=function e(){i(this,e),this.offsetTop=0};function c(e){for(var t=e.offsetLeft,o=e.offsetTop;e=e.offsetParent;)t+=e.offsetLeft,o+=e.offsetTop;return{x:t,y:o}}!function(e,t){void 0===t&&(t={});var o,s,i=t.insertAt;e&&"undefined"!=typeof document&&(o=document.head||document.getElementsByTagName("head")[0],(s=document.createElement("style")).type="text/css","top"===i&&o.firstChild?o.insertBefore(s,o.firstChild):o.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e)))}(".scroll-affix{position:fixed}.scroll-affix-max{position:relative}");var f="scroll-affix",l="scroll-affix-max";return function(){function t(e){var r=this;i(this,t),this.status=0,this.handleScroll=function(){var e,t=r.options,o=t.el,s=t.offsetTop,i=t.maxScrollHeight,n=t.sectionSelector,a="function"==typeof i?i():i;n&&(a=c(e=document.querySelector(n)).y+e.offsetHeight);var f=document.body.scrollTop||document.documentElement.scrollTop,l=0;a&&f+s+o.offsetHeight>a?l=2:f+s>r.baseTop&&(l=1),l!==r.status&&r.updateStatus(l,a)},this.options=Object.assign({},new a,e),this.initialize()}var e,o,s;return e=t,(o=[{key:"initialize",value:function(){this.baseTop=c(this.options.el).y,window.addEventListener("scroll",this.handleScroll)}},{key:"updateStatus",value:function(e,t){this.status=e;var o=this.options,s=o.el,i=o.offsetTop;switch(e){case 0:s.classList.remove(f,l),s.style.top="auto";break;case 1:s.classList.add(f),s.classList.remove(l),s.style.top=i+"px";break;default:s.classList.remove(f),s.classList.add(l),s.style.top=t-s.offsetHeight-this.baseTop+"px"}}},{key:"dispose",value:function(){window.removeEventListener("scroll",this.handleScroll)}}])&&n(e.prototype,o),s&&n(e,s),t}()});
